#!/usr/bin/env node
"use strict";

require("source-map-support/register");

require("colors");

var _asyncOra = require("@electron-forge/async-ora");

var _commander = _interopRequireDefault(require("commander"));

require("./util/terminate");

var _checkSystem = _interopRequireDefault(require("./util/check-system"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const originalSC = _commander.default.executeSubCommand.bind(_commander.default);

_commander.default.executeSubCommand = (argv, args, unknown) => {
  let indexOfDoubleDash = process.argv.indexOf('--');
  indexOfDoubleDash = indexOfDoubleDash < 0 ? process.argv.length + 1 : indexOfDoubleDash;
  const passThroughArgs = args.filter(arg => process.argv.indexOf(arg) > indexOfDoubleDash);
  const normalArgs = args.filter(arg => process.argv.indexOf(arg) <= indexOfDoubleDash);
  let newArgs = args;
  let newUnknown = unknown;

  if (passThroughArgs.length > 0) {
    newArgs = normalArgs.concat(unknown).concat('--').concat(passThroughArgs);
    newUnknown = [];
  }

  return originalSC(argv, newArgs, newUnknown);
};

_commander.default.version(require('../package.json').version).option('--verbose', 'Enables verbose mode').command('init', 'Initialize a new Electron application').command('import', 'Attempts to navigate you through the process of importing an existing project to "electron-forge"').command('lint', 'Lints the current Electron application').command('package', 'Package the current Electron application').command('make', 'Generate distributables for the current Electron application').command('start', 'Start the current Electron application').command('publish', 'Publish the current Electron application to GitHub').command('install', 'Install an Electron application from GitHub').on('command:*', commands => {
  // eslint-disable-next-line no-underscore-dangle
  if (!_commander.default._execs.has(commands[0])) {
    console.error();
    console.error(`Unknown command "${_commander.default.args.join(' ')}".`.red);
    console.error('See --help for a list of available commands.');
    process.exit(1);
  }
});

(async () => {
  let goodSystem;
  await (0, _asyncOra.asyncOra)('Checking your system', async ora => {
    goodSystem = await (0, _checkSystem.default)(ora);
  });

  if (!goodSystem) {
    console.error(`It looks like you are missing some dependencies you need to get Electron running.
Make sure you have git installed and Node.js version 6.0.0+`.red);
    process.exit(1);
  }

  _commander.default.parse(process.argv);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGVjdHJvbi1mb3JnZS50cyJdLCJuYW1lcyI6WyJvcmlnaW5hbFNDIiwicHJvZ3JhbSIsImV4ZWN1dGVTdWJDb21tYW5kIiwiYmluZCIsImFyZ3YiLCJhcmdzIiwidW5rbm93biIsImluZGV4T2ZEb3VibGVEYXNoIiwicHJvY2VzcyIsImluZGV4T2YiLCJsZW5ndGgiLCJwYXNzVGhyb3VnaEFyZ3MiLCJmaWx0ZXIiLCJhcmciLCJub3JtYWxBcmdzIiwibmV3QXJncyIsIm5ld1Vua25vd24iLCJjb25jYXQiLCJ2ZXJzaW9uIiwicmVxdWlyZSIsIm9wdGlvbiIsImNvbW1hbmQiLCJvbiIsImNvbW1hbmRzIiwiX2V4ZWNzIiwiaGFzIiwiY29uc29sZSIsImVycm9yIiwiam9pbiIsInJlZCIsImV4aXQiLCJnb29kU3lzdGVtIiwib3JhIiwicGFyc2UiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOzs7O0FBRUEsTUFBTUEsVUFBVSxHQUFHQyxtQkFBUUMsaUJBQVIsQ0FBMEJDLElBQTFCLENBQStCRixrQkFBL0IsQ0FBbkI7O0FBQ0FBLG1CQUFRQyxpQkFBUixHQUE0QixDQUFDRSxJQUFELEVBQWlCQyxJQUFqQixFQUFpQ0MsT0FBakMsS0FBdUQ7QUFDakYsTUFBSUMsaUJBQWlCLEdBQUdDLE9BQU8sQ0FBQ0osSUFBUixDQUFhSyxPQUFiLENBQXFCLElBQXJCLENBQXhCO0FBQ0FGLEVBQUFBLGlCQUFpQixHQUFHQSxpQkFBaUIsR0FBRyxDQUFwQixHQUF3QkMsT0FBTyxDQUFDSixJQUFSLENBQWFNLE1BQWIsR0FBc0IsQ0FBOUMsR0FBa0RILGlCQUF0RTtBQUVBLFFBQU1JLGVBQWUsR0FBR04sSUFBSSxDQUFDTyxNQUFMLENBQWFDLEdBQUQsSUFBU0wsT0FBTyxDQUFDSixJQUFSLENBQWFLLE9BQWIsQ0FBcUJJLEdBQXJCLElBQTRCTixpQkFBakQsQ0FBeEI7QUFDQSxRQUFNTyxVQUFVLEdBQUdULElBQUksQ0FBQ08sTUFBTCxDQUFhQyxHQUFELElBQVNMLE9BQU8sQ0FBQ0osSUFBUixDQUFhSyxPQUFiLENBQXFCSSxHQUFyQixLQUE2Qk4saUJBQWxELENBQW5CO0FBRUEsTUFBSVEsT0FBTyxHQUFHVixJQUFkO0FBQ0EsTUFBSVcsVUFBVSxHQUFHVixPQUFqQjs7QUFDQSxNQUFJSyxlQUFlLENBQUNELE1BQWhCLEdBQXlCLENBQTdCLEVBQWdDO0FBQzlCSyxJQUFBQSxPQUFPLEdBQUdELFVBQVUsQ0FBQ0csTUFBWCxDQUFrQlgsT0FBbEIsRUFBMkJXLE1BQTNCLENBQWtDLElBQWxDLEVBQXdDQSxNQUF4QyxDQUErQ04sZUFBL0MsQ0FBVjtBQUNBSyxJQUFBQSxVQUFVLEdBQUcsRUFBYjtBQUNEOztBQUNELFNBQU9oQixVQUFVLENBQUNJLElBQUQsRUFBT1csT0FBUCxFQUFnQkMsVUFBaEIsQ0FBakI7QUFDRCxDQWREOztBQWdCQWYsbUJBQ0dpQixPQURILENBQ1dDLE9BQU8sQ0FBQyxpQkFBRCxDQUFQLENBQTJCRCxPQUR0QyxFQUVHRSxNQUZILENBRVUsV0FGVixFQUV1QixzQkFGdkIsRUFHR0MsT0FISCxDQUdXLE1BSFgsRUFHbUIsdUNBSG5CLEVBSUdBLE9BSkgsQ0FJVyxRQUpYLEVBSXFCLG1HQUpyQixFQUtHQSxPQUxILENBS1csTUFMWCxFQUttQix3Q0FMbkIsRUFNR0EsT0FOSCxDQU1XLFNBTlgsRUFNc0IsMENBTnRCLEVBT0dBLE9BUEgsQ0FPVyxNQVBYLEVBT21CLDhEQVBuQixFQVFHQSxPQVJILENBUVcsT0FSWCxFQVFvQix3Q0FScEIsRUFTR0EsT0FUSCxDQVNXLFNBVFgsRUFTc0Isb0RBVHRCLEVBVUdBLE9BVkgsQ0FVVyxTQVZYLEVBVXNCLDZDQVZ0QixFQVdHQyxFQVhILENBV00sV0FYTixFQVdvQkMsUUFBRCxJQUFjO0FBQzdCO0FBQ0EsTUFBSSxDQUFDdEIsbUJBQVF1QixNQUFSLENBQWVDLEdBQWYsQ0FBbUJGLFFBQVEsQ0FBQyxDQUFELENBQTNCLENBQUwsRUFBc0M7QUFDcENHLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUjtBQUNBRCxJQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBZSxvQkFBbUIxQixtQkFBUUksSUFBUixDQUFhdUIsSUFBYixDQUFrQixHQUFsQixDQUF1QixJQUEzQyxDQUErQ0MsR0FBN0Q7QUFDQUgsSUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWMsOENBQWQ7QUFDQW5CLElBQUFBLE9BQU8sQ0FBQ3NCLElBQVIsQ0FBYSxDQUFiO0FBQ0Q7QUFDRixDQW5CSDs7QUFxQkEsQ0FBQyxZQUFZO0FBQ1gsTUFBSUMsVUFBSjtBQUNBLFFBQU0sd0JBQVMsc0JBQVQsRUFBaUMsTUFBT0MsR0FBUCxJQUFlO0FBQ3BERCxJQUFBQSxVQUFVLEdBQUcsTUFBTSwwQkFBWUMsR0FBWixDQUFuQjtBQUNELEdBRkssQ0FBTjs7QUFJQSxNQUFJLENBQUNELFVBQUwsRUFBaUI7QUFDZkwsSUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWdCOzREQUFGLENBQzRDRSxHQUQxRDtBQUVBckIsSUFBQUEsT0FBTyxDQUFDc0IsSUFBUixDQUFhLENBQWI7QUFDRDs7QUFFRDdCLHFCQUFRZ0MsS0FBUixDQUFjekIsT0FBTyxDQUFDSixJQUF0QjtBQUNELENBYkQiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG5pbXBvcnQgJ2NvbG9ycyc7XG5pbXBvcnQgeyBhc3luY09yYSB9IGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9hc3luYy1vcmEnO1xuaW1wb3J0IHByb2dyYW0gZnJvbSAnY29tbWFuZGVyJztcblxuaW1wb3J0ICcuL3V0aWwvdGVybWluYXRlJztcblxuaW1wb3J0IGNoZWNrU3lzdGVtIGZyb20gJy4vdXRpbC9jaGVjay1zeXN0ZW0nO1xuXG5jb25zdCBvcmlnaW5hbFNDID0gcHJvZ3JhbS5leGVjdXRlU3ViQ29tbWFuZC5iaW5kKHByb2dyYW0pO1xucHJvZ3JhbS5leGVjdXRlU3ViQ29tbWFuZCA9IChhcmd2OiBzdHJpbmdbXSwgYXJnczogc3RyaW5nW10sIHVua25vd246IHN0cmluZ1tdKSA9PiB7XG4gIGxldCBpbmRleE9mRG91YmxlRGFzaCA9IHByb2Nlc3MuYXJndi5pbmRleE9mKCctLScpO1xuICBpbmRleE9mRG91YmxlRGFzaCA9IGluZGV4T2ZEb3VibGVEYXNoIDwgMCA/IHByb2Nlc3MuYXJndi5sZW5ndGggKyAxIDogaW5kZXhPZkRvdWJsZURhc2g7XG5cbiAgY29uc3QgcGFzc1Rocm91Z2hBcmdzID0gYXJncy5maWx0ZXIoKGFyZykgPT4gcHJvY2Vzcy5hcmd2LmluZGV4T2YoYXJnKSA+IGluZGV4T2ZEb3VibGVEYXNoKTtcbiAgY29uc3Qgbm9ybWFsQXJncyA9IGFyZ3MuZmlsdGVyKChhcmcpID0+IHByb2Nlc3MuYXJndi5pbmRleE9mKGFyZykgPD0gaW5kZXhPZkRvdWJsZURhc2gpO1xuXG4gIGxldCBuZXdBcmdzID0gYXJncztcbiAgbGV0IG5ld1Vua25vd24gPSB1bmtub3duO1xuICBpZiAocGFzc1Rocm91Z2hBcmdzLmxlbmd0aCA+IDApIHtcbiAgICBuZXdBcmdzID0gbm9ybWFsQXJncy5jb25jYXQodW5rbm93bikuY29uY2F0KCctLScpLmNvbmNhdChwYXNzVGhyb3VnaEFyZ3MpO1xuICAgIG5ld1Vua25vd24gPSBbXTtcbiAgfVxuICByZXR1cm4gb3JpZ2luYWxTQyhhcmd2LCBuZXdBcmdzLCBuZXdVbmtub3duKTtcbn07XG5cbnByb2dyYW1cbiAgLnZlcnNpb24ocmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJykudmVyc2lvbilcbiAgLm9wdGlvbignLS12ZXJib3NlJywgJ0VuYWJsZXMgdmVyYm9zZSBtb2RlJylcbiAgLmNvbW1hbmQoJ2luaXQnLCAnSW5pdGlhbGl6ZSBhIG5ldyBFbGVjdHJvbiBhcHBsaWNhdGlvbicpXG4gIC5jb21tYW5kKCdpbXBvcnQnLCAnQXR0ZW1wdHMgdG8gbmF2aWdhdGUgeW91IHRocm91Z2ggdGhlIHByb2Nlc3Mgb2YgaW1wb3J0aW5nIGFuIGV4aXN0aW5nIHByb2plY3QgdG8gXCJlbGVjdHJvbi1mb3JnZVwiJylcbiAgLmNvbW1hbmQoJ2xpbnQnLCAnTGludHMgdGhlIGN1cnJlbnQgRWxlY3Ryb24gYXBwbGljYXRpb24nKVxuICAuY29tbWFuZCgncGFja2FnZScsICdQYWNrYWdlIHRoZSBjdXJyZW50IEVsZWN0cm9uIGFwcGxpY2F0aW9uJylcbiAgLmNvbW1hbmQoJ21ha2UnLCAnR2VuZXJhdGUgZGlzdHJpYnV0YWJsZXMgZm9yIHRoZSBjdXJyZW50IEVsZWN0cm9uIGFwcGxpY2F0aW9uJylcbiAgLmNvbW1hbmQoJ3N0YXJ0JywgJ1N0YXJ0IHRoZSBjdXJyZW50IEVsZWN0cm9uIGFwcGxpY2F0aW9uJylcbiAgLmNvbW1hbmQoJ3B1Ymxpc2gnLCAnUHVibGlzaCB0aGUgY3VycmVudCBFbGVjdHJvbiBhcHBsaWNhdGlvbiB0byBHaXRIdWInKVxuICAuY29tbWFuZCgnaW5zdGFsbCcsICdJbnN0YWxsIGFuIEVsZWN0cm9uIGFwcGxpY2F0aW9uIGZyb20gR2l0SHViJylcbiAgLm9uKCdjb21tYW5kOionLCAoY29tbWFuZHMpID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZXJzY29yZS1kYW5nbGVcbiAgICBpZiAoIXByb2dyYW0uX2V4ZWNzLmhhcyhjb21tYW5kc1swXSkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVua25vd24gY29tbWFuZCBcIiR7cHJvZ3JhbS5hcmdzLmpvaW4oJyAnKX1cIi5gLnJlZCk7XG4gICAgICBjb25zb2xlLmVycm9yKCdTZWUgLS1oZWxwIGZvciBhIGxpc3Qgb2YgYXZhaWxhYmxlIGNvbW1hbmRzLicpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfSk7XG5cbihhc3luYyAoKSA9PiB7XG4gIGxldCBnb29kU3lzdGVtO1xuICBhd2FpdCBhc3luY09yYSgnQ2hlY2tpbmcgeW91ciBzeXN0ZW0nLCBhc3luYyAob3JhKSA9PiB7XG4gICAgZ29vZFN5c3RlbSA9IGF3YWl0IGNoZWNrU3lzdGVtKG9yYSk7XG4gIH0pO1xuXG4gIGlmICghZ29vZFN5c3RlbSkge1xuICAgIGNvbnNvbGUuZXJyb3IoKGBJdCBsb29rcyBsaWtlIHlvdSBhcmUgbWlzc2luZyBzb21lIGRlcGVuZGVuY2llcyB5b3UgbmVlZCB0byBnZXQgRWxlY3Ryb24gcnVubmluZy5cbk1ha2Ugc3VyZSB5b3UgaGF2ZSBnaXQgaW5zdGFsbGVkIGFuZCBOb2RlLmpzIHZlcnNpb24gNi4wLjArYCkucmVkKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBwcm9ncmFtLnBhcnNlKHByb2Nlc3MuYXJndik7XG59KSgpO1xuIl19